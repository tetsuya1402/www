<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –æ–¥—è–≥—É</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>

<body>
  <header class="main-header">
    <div class="logo">
      <h1><a href="index.html">üëï –ú–∞–≥–∞–∑–∏–Ω</a></h1>
    </div>
    <div class="actions">
      <input type="text" id="search" placeholder="–ü–æ—à—É–∫..." />
      <select id="category-filter">
        <option value="">–£—Å—ñ</option>
        <option value="–§—É—Ç–±–æ–ª–∫–∏">–§—É—Ç–±–æ–ª–∫–∏</option>
        <option value="–ö–æ—Å—Ç—é–º–∏">–ö–æ—Å—Ç—é–º–∏</option>
        <option value="–ö—É—Ä—Ç–∫–∏">–ö—É—Ä—Ç–∫–∏</option>
        <option value="–ö—Ä–æ—Å—Å–æ–≤–∫–∏">–ö—Ä–æ—Å—Å–æ–≤–∫–∏</option>
      </select>
      <a href="cart.html">üõí –ö–æ—à–∏–∫</a>
      <a href="login.html" id="login-link">üîê –í—Ö—ñ–¥</a>
      <span id="welcome-text"></span>
      <button id="logout-btn" style="display:none;" onclick="logout()">üö™ –í–∏–π—Ç–∏</button>
      <button onclick="toggleTheme()">üåì</button>
    </div>
  </header>

  <main class="container">
    <div id="product-list" class="grid"></div>
  </main>

  <footer>
    <p>&copy; 2025 –ú–∞–≥–∞–∑–∏–Ω –æ–¥—è–≥—É</p>
  </footer>

  <script>
    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');
    function toggleTheme() {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    }

    const user = localStorage.getItem('user');
    const loginLink = document.getElementById('login-link');
    const logoutBtn = document.getElementById('logout-btn');
    const welcomeText = document.getElementById('welcome-text');

    function updateUserUI() {
      if (user) {
        welcomeText.textContent = `üëã –í—ñ—Ç–∞—é, ${user}`;
        loginLink.style.display = 'none';
        logoutBtn.style.display = 'inline-block';
      }
    }
    function logout() {
      localStorage.removeItem('user');
      window.location.reload();
    }
    updateUserUI();

    const defaultProducts = [
      { id: 1, name: "–§—É—Ç–±–æ–ª–∫–∞ –±—ñ–ª–∞", price: 500, category: "–§—É—Ç–±–æ–ª–∫–∏", image: "images/product1.jpg", description: "–õ–µ–≥–∫–∞ —Ñ—É—Ç–±–æ–ª–∫–∞" },
      { id: 2, name: "–ö–æ—Å—Ç—é–º", price: 700, category: "–ö–æ—Å—Ç—é–º–∏", image: "images/product2.jpg", description: "–ï–ª–µ–≥–∞–Ω—Ç–Ω–∏–π –∫–æ—Å—Ç—é–º" },
      { id: 3, name: "–ö—É—Ä—Ç–∫–∞", price: 5100, category: "–ö—É—Ä—Ç–∫–∏", image: "images/product3.jpg", description: "–¢–µ–ø–ª–∞ –∑–∏–º–æ–≤–∞ –∫—É—Ä—Ç–∫–∞" },
      { id: 4, name: "–ö—Ä–æ—Å—Å–æ–≤–∫–∏", price: 4100, category: "–ö—Ä–æ—Å—Å–æ–≤–∫–∏", image: "images/product4.jpg", description: "–°–ø–æ—Ä—Ç–∏–≤–Ω—ñ –∫—Ä–æ—Å—ñ–≤–∫–∏" }
    ];
    const adminProducts = JSON.parse(localStorage.getItem("adminProducts")) || [];
    const products = [...defaultProducts, ...adminProducts];

    function addToCart(id) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push({ id, size: "M" });
      localStorage.setItem('cart', JSON.stringify(cart));
      alert("–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞!");
    }

    function displayProducts(items) {
      const productList = document.getElementById('product-list');
      productList.innerHTML = '';
      items.forEach(product => {
        productList.innerHTML += `
          <div class="card">
            <a href="product.html?id=${product.id}">
              <img src="${product.image}" alt="${product.name}" />
              <h3>${product.name}</h3>
            </a>
            <p>${product.price} –≥—Ä–Ω</p>
            <button onclick="addToCart(${product.id})">–î–æ –∫–æ—à–∏–∫–∞</button>
          </div>
        `;
      });
    }

    const searchInput = document.getElementById('search');
    const categoryFilter = document.getElementById('category-filter');
    function filterProducts() {
      const query = searchInput.value.toLowerCase();
      const category = categoryFilter.value;
      const filtered = products.filter(p =>
        p.name.toLowerCase().includes(query) &&
        (category === '' || p.category === category)
      );
      displayProducts(filtered);
    }

    searchInput.addEventListener('input', filterProducts);
    categoryFilter.addEventListener('change', filterProducts);
    displayProducts(products);
  </script>
</body>

</html>